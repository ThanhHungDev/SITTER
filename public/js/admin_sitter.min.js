function ajaxGetDetailsSitter(t,e){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:t,type:"get",async:!1,success:function(t){200==t.code?(setDataToDetail(t.data),$("#details-sitter-modal").modal({closeClass:"popup-lose",escapeClose:!1,showClose:!1})):$.toast({heading:"エラー",text:t.messages,showHideTransition:"slide",icon:"Error",position:"top-right"}),$(e).prop("disabled",!1)},error:function(t){$.toast({heading:"エラー",text:"更新に失敗しました",showHideTransition:"slide",icon:"error",position:"top-right"}),$(e).prop("disabled",!1)}})}function setDataToDetail(t){$(".link-update").css("display","none"),$("#link-update").val("");let e=document.getElementById("image-qualifi");e.innerHTML="",t.galaries.forEach(t=>{let i=t,a=document.createElement("div");a.classList.add("item-img");let s=document.createElement("img");s.setAttribute("src",i),a.appendChild(s),e.appendChild(a)}),$("#experiences").text(t.experiences.toString()),$("#skills").text(t.skills.toString()),$("#name").text(t.contact.contact_name),$("#full-address").text(t.contact.contact_address),$("#num-phone").text(t.contact.contact_phone),$("#relationship").text(t.contact.contact_relationship),t.admin_unaccept&&($(".link-update").css("display","block"),$("#link-update").val(t.url_update))}function ajaxUpdatePublish(t,e,i){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:t,data:e,type:"post",success:function(t){200==t.code?$.toast({heading:"成功しました",text:t.messages,showHideTransition:"slide",icon:"success",position:"top-right"}):$.toast({heading:"エラー",text:t.messages,showHideTransition:"slide",icon:"error",position:"top-right"}),$(i).prop("disabled",!1)},error:function(t){$.toast({heading:"エラー",text:"update fail!",showHideTransition:"slide",icon:"error",position:"top-right"}),$(i).prop("disabled",!1)}})}function ajaxDeleteSitter(t,e){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:t,data:e,type:"post",success:function(t){200==t.code?($.toast({heading:"成功しました",text:t.messages,showHideTransition:"slide",icon:"success",position:"top-right"}),setTimeout(function(){location.reload()},500)):$.toast({heading:"エラー",text:t.messages,showHideTransition:"slide",icon:"error",position:"top-right"})},error:function(t){$.toast({heading:"エラー",text:"削除失敗",showHideTransition:"slide",icon:"error",position:"top-right"})}})}function ajaxConfirmSitter(t,e,i){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:t,data:e,type:"post",success:function(t){1==t.admin_accept?(e.admin_confirm==ADMIN_CONFIRM_ACCEPT&&deleteHTMLItemSitter("action-confrim-",t.id),e.admin_confirm!=ADMIN_CONFIRM_ACCEPT&&(i.addClass("js-link-update"),i.attr("data-url",t.url),i.text("ンクをコピーする"),i.removeClass("js-unactivity-sitter")),$.toast({heading:"成功しました",text:t.messages,showHideTransition:"slide",icon:"success",position:"top-right"})):$.toast({heading:"エラー",text:t.messages,showHideTransition:"slide",icon:"error",position:"top-right"})},error:function(t){$.toast({heading:"エラー",text:"承認に失敗しました",showHideTransition:"slide",icon:"error",position:"top-right"})}})}function deleteHTMLItemSitter(t,e){document.getElementById(t+e).remove()}function deleteSitter(){ajaxDeleteSitter($("#deleteSitter").attr("data-url"),{id:$("#deleteSitter").attr("data-item")})}$(document).ready(function(){$(".slider").show(),$(".slider-nav").show(),$(".slider").slick({slidesToShow:1,slidesToScroll:1,fade:!0,pauseOnHover:!0,swipe:!0,arrows:!1}),$(".slider-nav").slick({asNavFor:".slider",dots:!0,infinite:!0,slidesToScroll:1,centerMode:!0,variableWidth:!0,autoplay:!1,focusOnSelect:!0}),$(".slider").on("click",function(){let t=$(this).find("img"),e=$(this).slick("slickCurrentSlide"),i=$("#modal-slider");for(let e=0;e<t.length;e++){let a=t[e],s=$("<img/>");s.attr("src",a.src),i.append(s)}$("#modal-slider").slick({slidesToShow:1,slidesToScroll:1,fade:!0,pauseOnHover:!0,swipe:!0,autoplay:!0,arrows:!1}),$("#modal-slider-nav").slick({asNavFor:"#modal-slider",dots:!0,infinite:!0,slidesToScroll:1,centerMode:!0,variableWidth:!0,autoplay:!0,focusOnSelect:!0}),$("#modal-slider").slick("slickGoTo",e,!0),$("strong.current-item").text(e+1),$("strong.total-item").text(t.length),$("#certifies-modal").modal({escapeClose:!1,showClose:!1})}),$("#certifies-modal").on($.modal.CLOSE,function(){$("#modal-slider").slick("unslick"),$("#modal-slider-nav").slick("unslick"),$("#modal-slider").empty(),$("#modal-slider-nav").empty()}),$("#modal-slider").on("afterChange",function(t,e,i){$("strong.current-item").text(i+1)}),$(".modal-prev-nav").on("click",function(){$("#modal-slider").slick("slickPrev")}),$(".modal-next-nav").on("click",function(){$("#modal-slider").slick("slickNext")}),$(".prev-nav").on("click",function(){$(this).parent().parent().find(".slider").slick("slickPrev")}),$(".next-nav").on("click",function(){$(this).parent().parent().find(".slider").slick("slickNext")}),$(".slider").on("afterChange",function(t,e,i){$(this).parent().find("strong.row-current-item").text(i+1)}),$("#slt_datepicker").multiDatesPicker({beforeShow:function(t,e){$("#ui-datepicker-div").addClass("single-picker")}}),$(".js-public-sitter").on("click",function(){let t=$(".bl-toggle-public[for="+this.id+"]");this.checked?t.text("公開中"):t.text("非公開");let e=$(this).attr("data-url"),i={id:$(this).attr("data-item"),publish:$(this).is(":checked")};$(this).prop("disabled",!0),ajaxUpdatePublish(e,i,this)}),$(".js-detail-sitter").on("click",function(){let t=$(this).attr("data-url");$(this).prop("disabled",!0),ajaxGetDetailsSitter(t,this)}),$(".js-delete-sitter").on("click",function(){$("#deleteSitter").attr("data-item",$(this).attr("data-item")),$("#deleteSitter").attr("data-url",$(this).attr("data-url")),$("#deleteSitter").modal({escapeClose:!1,showClose:!1})}),$(".js-activity-sitter").on("click",function(){ajaxConfirmSitter($(this).attr("data-url"),{id:$(this).attr("data-item"),admin_confirm:$(this).attr("data-confirm")},$(this))}),$(".js-unactivity-sitter").on("click",function(){if($(this).hasClass("js-unactivity-sitter")){ajaxConfirmSitter($(this).attr("data-url"),{id:$(this).attr("data-item"),admin_confirm:$(this).attr("data-confirm")},$(this))}if($(this).hasClass("js-link-update")){let t=$(".js-link-update").attr("data-url"),e=$("<input>");$(this).append(e),e.val(t).select(),document.execCommand("copy"),e.remove(),$.toast({text:"コピーしました",showHideTransition:"slide",icon:"success",position:"top-right"})}}),$(".js-history-chat").on("click",function(){let t=$(this).attr("data-url");location.assign(t)}),$(".js-link-update").on("click",function(){let t=$(this).attr("data-url"),e=$("<input>");$(this).append(e),e.val(t).select(),document.execCommand("copy"),e.remove(),$.toast({text:"コピーしました",showHideTransition:"slide",icon:"success",position:"top-right"})})}),$(".small-img").on("click",function(){let t=$(this).find("img").clone();$("#content-avatar").append(t),$("#avatar-modal").modal({escapeClose:!1,showClose:!1})}),$("#avatar-modal").on($.modal.CLOSE,function(){$("#content-avatar").empty()});
function checkHyphen(e){return e.indexOf("-")>=0}function loadExperiences(){$("input.experience-check").each(function(){if($(this).is(":checked")){var e=$("#upload-certi-template").clone().show().removeAttr("id");e.addClass("certify_form_"+$(this).val()),e.find('input[data-type="upload"]').attr("name","certifies[certify_"+$(this).val()+"][]"),e.find(".upload-info").attr("data-name","certifies[certify_"+$(this).val()+"][]"),$("#upload-certi").append(e)}})}$(document).ready(function(){loadExperiences(),$("input.experience-check").change(function(){var e=$("#upload-certi-template").clone().removeAttr("id").show();if($(this).is(":checked"))e.addClass("certify_form_"+$(this).val()),e.find('input[data-type="upload"]').attr("name","certifies[certify_"+$(this).val()+"][]"),e.find(".upload-info").attr("data-name","certifies[certify_"+$(this).val()+"][]"),$("#upload-certi").append(e);else{var t=$("#upload-certi").find(".certify_form_"+$(this).val());t&&t.remove()}}),$("#sitter-register-parent").on("click",".upload-info",function(){let e=$(this).attr("data-name");$('input[name="'+e+'"]').trigger("click")}),$("#sitter-register-parent").on("change",'input[data-type="upload"]',function(e){var t=e.target,i=$(this);if($(".validate-image").text(""),t.files&&t.files[0]){var a=t.files[0];!function(e,t,i){var a=["image/gif","image/png","image/jpg","image/jpeg"];if(t!=a[0]&&t!=a[1]&&t!=a[2]&&t!=a[3]){var n=i.closest(".form-validate").find(".form-error");return i.val(""),void n.html('<label class="error">サポートされていないファイル</label>')}var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){var t=$(i).attr("name"),a="div[data-name='"+t+"'";$(a).css("background","unset");var n='<img class="load-image" src="'+e.target.result+'" alt="">';n&&($(a).html(n),hideError(i))}}(a,a.type,i)}}),$("#sitter-register-parent").validate({onfocusout:function(e){$(e).valid()},invalidHandler:function(){$(this).find(".form-validate .error:first").focus()},rules:{type_upload:"required",input_file_front:{required:!0,accept:"image/jpg,image/jpeg,image/png,image/gif"},input_file_back:{required:!0,accept:"image/jpg,image/jpeg,image/png,image/gif"},check_accept:"required","skills[]":"required",post_code:{required:{depends:function(){return!$.trim($(this).val())&&($(this).val($.trim($(this).val())),!0)}},minlength:1,maxlength:8},contact_name:{required:{depends:function(){return $.trim($(this).val())||$(this).val($.trim($(this).val())),!0}},minlength:1,maxlength:255},contact_address:{required:{depends:function(){return $.trim($(this).val())||$(this).val($.trim($(this).val())),!0}},minlength:1,maxlength:255},contact_phone:{required:{depends:function(){return $.trim($(this).val())||$(this).val($.trim($(this).val())),!0}},minlength:10,maxlength:11,checkHyphen:!0},contact_relationship:{required:{depends:function(){return $.trim($(this).val())||$(this).val($.trim($(this).val())),!0}},minlength:1,maxlength:255}},messages:{type_upload:{required:"本人確認書類を選択して下さい。"},input_file_front:{required:"画像を選択して下さい。",accept:"ファイル形式が異なります。"},input_file_back:{required:"画像を選択して下さい。",accept:"ファイル形式が異なります。"},"skills[]":{required:"サポートの項目は必須です"},post_code:{required:"郵便番号を入力して下さい。",minlength:"郵便番号は1桁以上、255桁以下でなければなりません。",maxlength:"郵便番号は1桁以上、255桁以下でなければなりません。"},check_accept:{required:"このフィールドは必須です"},contact_name:{required:"緊急連絡先お名前を入力して下さい。",minlength:"緊急連絡先お名前は1桁以上、255桁以下でなければなりません。",maxlength:"緊急連絡先お名前は1桁以上、255桁以下でなければなりません。"},contact_address:{required:"緊急連絡先住所を入力して下さい。",minlength:"緊急連絡先住所は1桁以上、255桁以下でなければなりません。",maxlength:"緊急連絡先住所は1桁以上、255桁以下でなければなりません。"},contact_phone:{required:"緊急連絡先電話番号を入力して下さい。",number:"緊急連絡先電話番号は数字を入力してください。",checkHyphen:"ハイフンは不要です",minlength:"電話番号は10桁以上、11桁以下でなければなりません。",maxlength:"電話番号は10桁以上、11桁以下でなければなりません。"},contact_relationship:{required:"緊急連絡先とのご関係を入力して下さい。",minlength:"緊急連絡先とのご関係は1桁以上、255桁以下でなければなりません。",maxlength:"緊急連絡先とのご関係は1桁以上、255桁以下でなければなりません。"},check_accept:{required:"登録には利用規約とプライバシーポリシーに同意していただく必要があります。"}},errorPlacement:function(e,t){(t=t.closest(".form-validate").find(".form-error")).html(""),e.appendTo(t)}})}),jQuery.validator.addMethod("checkHyphen",function(e){return!checkHyphen(e)}),$("#btn-post-code").on("click",function(){$("#contact_address").val(""),$("#inp-post-code").change()}),$("#inp-post-code").jpostal({postcode:["#inp-post-code"],address:{"#contact_address":"%3%4%5"}}),$("#inp-post-code").focusout(function(){let e=$(this).val();e.length<=8?e.length>3&&e.indexOf("-")<0&&$(this).val(e.substr(0,3)+"-"+e.substr(3)):$(this).val(e.substr(0,8))}),$(document).on("blur","#contact-phone, #inp-post-code",function(){$(this).val(convertNumberJP($(this).val()))});
function deleteStripeAccount(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:SYSTEM_BASE_URL+"sitter/delete-stripe-account",type:"DELETE",success:function(e){200==e.code&&$.toast({heading:"成功",text:"正常に削除されました",showHideTransition:"slide",icon:"success",position:"top-right"}),location.reload()},error:function(e){$.toast({heading:"エラー",text:" 削除エラー",showHideTransition:"slide",icon:"error",position:"top-right"})}})}function chooseFile(){$("#certify").click()}function readURL(e,t){if(e.files&&e.files[0]){var i=new FileReader;i.onload=function(i){if(i.target.result){var o=i.target.result,s=document.createElement("img");s.src=o;var a=document.createElement("div");a.className="certify js-waiting-ajax-save-image";var n=document.createElement("span");n.className="js_loading_img",n.value="js_loading_img",a.appendChild(s),a.appendChild(n);var r=document.createElement("div");r.className="col-12 col-sm-6 col-lg-3 grid-image",r.appendChild(a),document.getElementById(t).insertBefore(r,document.getElementById(t).firstChild),saveImage(e.files[0])}},i.readAsDataURL(e.files[0])}else $.toast({heading:"エラー",text:"Error!",showHideTransition:"slide",icon:"error",position:"top-right"})}function saveImage(e){var t=new FormData;t.append("file",e);var i=APP_URL+"/sitter/upload-certify";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:i,data:t,enctype:"multipart/form-data",cache:!1,contentType:!1,processData:!1,success:function(e){var t=$(".js-waiting-ajax-save-image");if(200==e.code){t.addClass("itemRemove");var i=document.createElement("span");i.className="js_remove_img",i.value="js_remove_img",i.innerHTML='<i class="far fa-trash-alt"></i>',i.setAttribute("data-id-image",e.id),t.removeClass("js-waiting-ajax-save-image"),t.append(i),$(".js_loading_img").remove(),$.toast({heading:"成功",text:"画像をアップロードしました",showHideTransition:"slide",icon:"success",position:"top-right"})}else $.toast({heading:"エラー",text:"画像のアップロードに失敗しました",showHideTransition:"slide",icon:"error",position:"top-right"}),$(".js_loading_img").closest("li").remove()},error:function(e){$.toast({heading:"エラー",text:"画像のアップロードに失敗しました",showHideTransition:"slide",icon:"error",position:"top-right"}),$(".js_loading_img").closest("li").remove()}})}$(document).ready(function(){function e(e=1){console.log(SYSTEM_BASE_URL),$.ajax({url:SYSTEM_BASE_URL+"sitter/load-list-bookings?page="+e,success:function(e){$("#list-booking").html(e)}})}$("#slider").show(),$("#slider-nav").show(),$("#alert_message .close").click(function(e){$("#alert_message").fadeOut("slow")}),e(),$("#btn-sitter-public").one("click",function(e){e.preventDefault(),$.ajax({type:"GET",url:SYSTEM_BASE_URL+"sitter/publish-profile",dataType:"json",success:function(e){200==e.code?$.toast({heading:"成功",text:"プロフィールを公開しました",showHideTransition:"slide",icon:"success",position:"top-right"}):$.toast({heading:"エラー",text:" プロフィールを公開に失敗しました",showHideTransition:"slide",icon:"error",position:"top-right"})},error:function(e){$.toast({heading:"エラー",text:" プロフィールを公開に失敗しました",showHideTransition:"slide",icon:"error",position:"top-right"})}})}),$("#slider").slick({slidesToShow:1,slidesToScroll:1,fade:!0,asNavFor:"#slider-nav",pauseOnHover:!0,swipe:!0,arrows:!1}),$("#slider-nav").slick({asNavFor:"#slider",dots:!0,infinite:!0,slidesToScroll:1,centerMode:!0,variableWidth:!0,autoplay:!0,focusOnSelect:!0}),$(document).on("click",".pagination-list-booking a",function(t){t.preventDefault(),e($(this).attr("href").split("page=")[1])}),$("#btn-delete-stripe").on("click",function(e){$("#deleteStripeAccount").modal()})}),$("#showCertifies").on("click",".js_remove_img",function(){var e=$(this),t=e.attr("data-id-image");e.closest("div.grid-image").remove(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:APP_URL+"/sitter/remove-certify",data:{imageId:t},dataType:"json",success:function(e){200==e.code?$.toast({heading:"成功",text:"画像を削除しました",showHideTransition:"slide",icon:"success",position:"top-right"}):$.toast({heading:"エラー",text:"画像を削除に失敗しました",showHideTransition:"slide",icon:"error",position:"top-right"})},error:function(e){$.toast({heading:"エラー",text:"画像を削除に失敗しました",showHideTransition:"slide",icon:"error",position:"top-right"})}})});